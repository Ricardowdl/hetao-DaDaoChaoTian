export type DaoStagePreset = {
  名称: string
  描述: string
  突破经验: number
}

export type DaoPreset = {
  道名: string
  分类: string
  描述: string
  阶段列表: DaoStagePreset[]
}

const STAGES_BASE: DaoStagePreset[] = [
  { 名称: '入门', 描述: '初窥门径', 突破经验: 100 },
  { 名称: '小成', 描述: '略有所成', 突破经验: 300 },
  { 名称: '大成', 描述: '登堂入室', 突破经验: 1000 },
  { 名称: '精通', 描述: '出神入化', 突破经验: 3000 },
  { 名称: '圆满', 描述: '道法通神', 突破经验: 10000 }
]

export const DAO_PRESETS: Record<string, DaoPreset> = {
  剑道: {
    道名: '剑道',
    分类: '战斗',
    描述: '以剑入道，追求剑道极致',
    阶段列表: [
      { 名称: '入门', 描述: '初窥门径', 突破经验: 100 },
      { 名称: '小成', 描述: '略有所成', 突破经验: 300 },
      { 名称: '大成', 描述: '登堂入室', 突破经验: 1000 },
      { 名称: '精通', 描述: '出神入化', 突破经验: 3000 },
      { 名称: '圆满', 描述: '剑道通神', 突破经验: 10000 }
    ]
  },
  刀道: {
    道名: '刀道',
    分类: '战斗',
    描述: '以刀证道，追求刀法极致',
    阶段列表: [...STAGES_BASE]
  },
  枪道: {
    道名: '枪道',
    分类: '战斗',
    描述: '长枪如龙，一往无前',
    阶段列表: [...STAGES_BASE]
  },
  拳道: {
    道名: '拳道',
    分类: '战斗',
    描述: '拳拳到肉，刚猛无匹',
    阶段列表: [...STAGES_BASE]
  },

  丹道: {
    道名: '丹道',
    分类: '辅助',
    描述: '炼丹济世，以丹入道',
    阶段列表: [
      { 名称: '入门', 描述: '识药辨火', 突破经验: 100 },
      { 名称: '小成', 描述: '炉火纯青', 突破经验: 300 },
      { 名称: '大成', 描述: '丹成九转', 突破经验: 1000 },
      { 名称: '精通', 描述: '妙手回春', 突破经验: 3000 },
      { 名称: '圆满', 描述: '神丹通天', 突破经验: 10000 }
    ]
  },
  器道: {
    道名: '器道',
    分类: '辅助',
    描述: '炼器通神，以器证道',
    阶段列表: [...STAGES_BASE]
  },
  阵道: {
    道名: '阵道',
    分类: '辅助',
    描述: '阵法通玄，布阵天地',
    阶段列表: [...STAGES_BASE]
  },
  符道: {
    道名: '符道',
    分类: '辅助',
    描述: '符箓通神，以符入道',
    阶段列表: [...STAGES_BASE]
  },

  毒道: {
    道名: '毒道',
    分类: '特殊',
    描述: '以毒证道，毒霸天下',
    阶段列表: [...STAGES_BASE]
  },
  体道: {
    道名: '体道',
    分类: '特殊',
    描述: '锻体成圣，肉身成圣',
    阶段列表: [...STAGES_BASE]
  },
  神道: {
    道名: '神道',
    分类: '特殊',
    描述: '神念通天，意念杀人',
    阶段列表: [...STAGES_BASE]
  },
  魂道: {
    道名: '魂道',
    分类: '特殊',
    描述: '魂力通玄，魂魄离体',
    阶段列表: [...STAGES_BASE]
  },

  时道: {
    道名: '时道',
    分类: '元素',
    描述: '掌控时间，逆转光阴',
    阶段列表: [
      { 名称: '入门', 描述: '感知岁月', 突破经验: 120 },
      { 名称: '小成', 描述: '拨快一息', 突破经验: 400 },
      { 名称: '大成', 描述: '凝滞流光', 突破经验: 1200 },
      { 名称: '精通', 描述: '逆转片刻', 突破经验: 3600 },
      { 名称: '圆满', 描述: '因果同参', 突破经验: 12000 }
    ]
  },
  空道: {
    道名: '空道',
    分类: '元素',
    描述: '空间穿梭，瞬移千里',
    阶段列表: [
      { 名称: '入门', 描述: '识空之隙', 突破经验: 120 },
      { 名称: '小成', 描述: '穿梭尺许', 突破经验: 400 },
      { 名称: '大成', 描述: '瞬移百步', 突破经验: 1200 },
      { 名称: '精通', 描述: '折叠虚空', 突破经验: 3600 },
      { 名称: '圆满', 描述: '界壁同游', 突破经验: 12000 }
    ]
  },
  生死道: {
    道名: '生死道',
    分类: '元素',
    描述: '掌控生死，轮回无常',
    阶段列表: [
      { 名称: '入门', 描述: '知生识死', 突破经验: 120 },
      { 名称: '小成', 描述: '生机流转', 突破经验: 400 },
      { 名称: '大成', 描述: '死意凛然', 突破经验: 1200 },
      { 名称: '精通', 描述: '轮回一念', 突破经验: 3600 },
      { 名称: '圆满', 描述: '生死由心', 突破经验: 12000 }
    ]
  },
  阴阳道: {
    道名: '阴阳道',
    分类: '元素',
    描述: '阴阳调和，太极生两仪',
    阶段列表: [
      { 名称: '入门', 描述: '一阴一阳', 突破经验: 120 },
      { 名称: '小成', 描述: '两仪相生', 突破经验: 400 },
      { 名称: '大成', 描述: '四象成形', 突破经验: 1200 },
      { 名称: '精通', 描述: '太极归一', 突破经验: 3600 },
      { 名称: '圆满', 描述: '阴阳同参', 突破经验: 12000 }
    ]
  },
  五行道: {
    道名: '五行道',
    分类: '元素',
    描述: '五行相生相克，元素掌控',
    阶段列表: [
      { 名称: '入门', 描述: '识五行', 突破经验: 110 },
      { 名称: '小成', 描述: '运五行', 突破经验: 350 },
      { 名称: '大成', 描述: '化五行', 突破经验: 1100 },
      { 名称: '精通', 描述: '御五行', 突破经验: 3300 },
      { 名称: '圆满', 描述: '五行归元', 突破经验: 11000 }
    ]
  }
}

export function daoCategoriesFromPresets(presets: Record<string, DaoPreset>) {
  const set = new Set<string>()
  for (const p of Object.values(presets || {})) {
    if (p && typeof p === 'object') set.add(String((p as any).分类 || '未分类'))
  }
  return Array.from(set)
}
